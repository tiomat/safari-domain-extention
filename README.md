# Domain Tracker - Safari Extension

Safari —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤—Å–µ—Ö –¥–æ–º–µ–Ω–æ–≤, –Ω–∞ –∫–æ—Ç–æ—Ä—ã–µ —Ç–µ–∫—É—â–∞—è –≤–∫–ª–∞–¥–∫–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å—ã.

Safari extension that shows all domains that the current tab sends requests to.

## –§—É–Ω–∫—Ü–∏–∏ / Features

- üåê –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –¥–æ–º–µ–Ω–æ–≤, –Ω–∞ –∫–æ—Ç–æ—Ä—ã–µ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –∑–∞–ø—Ä–æ—Å—ã —Å–æ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- üìä –ü–æ–¥—Å—á–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –¥–æ–º–µ–Ω–æ–≤
- üßπ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ—á–∏—Å—Ç–∏—Ç—å —Å–ø–∏—Å–æ–∫ –¥–ª—è —Ç–µ–∫—É—â–µ–π –≤–∫–ª–∞–¥–∫–∏
- üé® –ß–∏—Å—Ç—ã–π –∏ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –≤ —Å—Ç–∏–ª–µ macOS
- ‚ö° –õ–µ–≥–∫–æ–≤–µ—Å–Ω–æ–µ –∏ –±—ã—Å—Ç—Ä–æ–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ

---

- üåê Tracks all domains that a page sends requests to
- üìä Counts unique domains
- üßπ Ability to clear the list for the current tab
- üé® Clean and modern macOS-style interface
- ‚ö° Lightweight and fast extension

## –°–∏—Å—Ç–µ–º–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è / System Requirements

- macOS 10.14 (Mojave) –∏–ª–∏ –Ω–æ–≤–µ–µ
- Xcode 14.0 –∏–ª–∏ –Ω–æ–≤–µ–µ
- Safari 14 –∏–ª–∏ –Ω–æ–≤–µ–µ

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ —Å–±–æ—Ä–∫–∞ / Installation and Build

### –®–∞–≥ 1: –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è / Step 1: Clone the repository

```bash
git clone https://github.com/tiomat/safari-domain-extention.git
cd safari-domain-extention
```

### –®–∞–≥ 2: –û—Ç–∫—Ä—ã—Ç–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ –≤ Xcode / Step 2: Open the project in Xcode

```bash
open "Domain Tracker/Domain Tracker.xcodeproj"
```

### –®–∞–≥ 3: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–¥–ø–∏—Å–∏ –∫–æ–¥–∞ / Step 3: Configure code signing

1. –í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç `Domain Tracker` –≤ Project Navigator (–ª–µ–≤–∞—è –ø–∞–Ω–µ–ª—å)
2. –í—ã–±–µ—Ä–∏—Ç–µ —Ç–∞—Ä–≥–µ—Ç `Domain Tracker` –≤ —Å–ø–∏—Å–∫–µ —Ç–∞—Ä–≥–µ—Ç–æ–≤
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É "Signing & Capabilities"
4. –í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à—É Team –≤ –≤—ã–ø–∞–¥–∞—é—â–µ–º —Å–ø–∏—Å–∫–µ "Team"
5. –ü–æ–≤—Ç–æ—Ä–∏—Ç–µ —à–∞–≥–∏ 2-4 –¥–ª—è —Ç–∞—Ä–≥–µ—Ç–∞ `Domain Tracker Extension`

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ï—Å–ª–∏ —É –≤–∞—Å –Ω–µ—Ç Apple Developer –∞–∫–∫–∞—É–Ω—Ç–∞, –≤—ã –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–≤–æ–π Apple ID. Xcode –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—Å—Ç –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π –ø—Ä–æ—Ñ–∏–ª—å —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞.

---

1. Select the `Domain Tracker` project in Project Navigator (left panel)
2. Select the `Domain Tracker` target from the target list
3. Go to the "Signing & Capabilities" tab
4. Select your Team from the "Team" dropdown
5. Repeat steps 2-4 for the `Domain Tracker Extension` target

**Note:** If you don't have an Apple Developer account, you can use your Apple ID. Xcode will automatically create a free developer profile.

### –®–∞–≥ 4: –ò–∑–º–µ–Ω–µ–Ω–∏–µ Bundle Identifier (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) / Step 4: Change Bundle Identifier (optional)

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–∞—é—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã —Å Bundle Identifier:

1. –í –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö —Ç–∞—Ä–≥–µ—Ç–∞ `Domain Tracker`, –≤–æ –≤–∫–ª–∞–¥–∫–µ "General"
2. –ò–∑–º–µ–Ω–∏—Ç–µ "Bundle Identifier" —Å `com.example.Domain-Tracker` –Ω–∞ —á—Ç–æ-—Ç–æ —É–Ω–∏–∫–∞–ª—å–Ω–æ–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `com.yourname.Domain-Tracker`)
3. –ü–æ–≤—Ç–æ—Ä–∏—Ç–µ –¥–ª—è —Ç–∞—Ä–≥–µ—Ç–∞ `Domain Tracker Extension`, –∏–∑–º–µ–Ω–∏–≤ –Ω–∞ `com.yourname.Domain-Tracker.Extension`

---

If there are Bundle Identifier conflicts:

1. In the `Domain Tracker` target settings, on the "General" tab
2. Change "Bundle Identifier" from `com.example.Domain-Tracker` to something unique (e.g., `com.yourname.Domain-Tracker`)
3. Repeat for the `Domain Tracker Extension` target, changing to `com.yourname.Domain-Tracker.Extension`

### –®–∞–≥ 5: –°–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞ / Step 5: Build the project

1. –í—ã–±–µ—Ä–∏—Ç–µ —Å—Ö–µ–º—É `Domain Tracker` –≤ –≤–µ—Ä—Ö–Ω–µ–π –ø–∞–Ω–µ–ª–∏ Xcode
2. –í—ã–±–µ—Ä–∏—Ç–µ "My Mac" –≤ –∫–∞—á–µ—Å—Ç–≤–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
3. –ù–∞–∂–º–∏—Ç–µ ‚åò+B (Command+B) –∏–ª–∏ –≤—ã–±–µ—Ä–∏—Ç–µ Product ‚Üí Build
4. –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π —Å–±–æ—Ä–∫–∏ –Ω–∞–∂–º–∏—Ç–µ ‚åò+R (Command+R) –∏–ª–∏ –≤—ã–±–µ—Ä–∏—Ç–µ Product ‚Üí Run

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ `Domain Tracker` –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.

---

1. Select the `Domain Tracker` scheme in the top bar of Xcode
2. Select "My Mac" as the device
3. Press ‚åò+B (Command+B) or select Product ‚Üí Build
4. After a successful build, press ‚åò+R (Command+R) or select Product ‚Üí Run

The `Domain Tracker` app will launch automatically.

### –®–∞–≥ 6: –í–∫–ª—é—á–µ–Ω–∏–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –≤ Safari / Step 6: Enable the extension in Safari

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ `Domain Tracker` (–µ—Å–ª–∏ –µ—â–µ –Ω–µ –∑–∞–ø—É—â–µ–Ω–æ)
2. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "Open Safari Preferences" –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏, –∏–ª–∏ –æ—Ç–∫—Ä–æ–π—Ç–µ Safari ‚Üí Settings ‚Üí Extensions
3. –ù–∞–π–¥–∏—Ç–µ "Domain Tracker" –≤ —Å–ø–∏—Å–∫–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π
4. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Ñ–ª–∞–∂–æ–∫, —á—Ç–æ–±—ã –≤–∫–ª—é—á–∏—Ç—å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ
5. –ù–∞–∂–º–∏—Ç–µ "Turn On" –≤ –¥–∏–∞–ª–æ–≥–æ–≤–æ–º –æ–∫–Ω–µ, –µ—Å–ª–∏ –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è

**–í–∞–∂–Ω–æ:** –ü–æ—Å–ª–µ –ø–µ—Ä–≤–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –º–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å—Å—è –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ Safari.

---

1. Launch the `Domain Tracker` app (if not already running)
2. Click "Open Safari Preferences" button in the app, or open Safari ‚Üí Settings ‚Üí Extensions
3. Find "Domain Tracker" in the extensions list
4. Check the checkbox to enable the extension
5. Click "Turn On" in the dialog if prompted

**Important:** You may need to restart Safari after the first installation.

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ / Usage

1. –û—Ç–∫—Ä–æ–π—Ç–µ –ª—é–±—É—é –≤–µ–±-—Å—Ç—Ä–∞–Ω–∏—Ü—É –≤ Safari
2. –ö–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ –∏–∫–æ–Ω–∫—É —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è Domain Tracker –≤ –ø–∞–Ω–µ–ª–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ Safari (–∏–∫–æ–Ω–∫–∞ –≥–ª–æ–±—É—Å–∞)
3. –í –≤—Å–ø–ª—ã–≤–∞—é—â–µ–º –æ–∫–Ω–µ –≤—ã —É–≤–∏–¥–∏—Ç–µ —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –¥–æ–º–µ–Ω–æ–≤, –Ω–∞ –∫–æ—Ç–æ—Ä—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –æ—Ç–ø—Ä–∞–≤–∏–ª–∞ –∑–∞–ø—Ä–æ—Å—ã
4. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–Ω–æ–ø–∫—É "Clear" –¥–ª—è –æ—á–∏—Å—Ç–∫–∏ —Å–ø–∏—Å–∫–∞ —Ç–µ–∫—É—â–µ–π –≤–∫–ª–∞–¥–∫–∏
5. –°—á–µ—Ç—á–∏–∫ –≤–Ω–∏–∑—É –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Ç—Å–ª–µ–∂–µ–Ω–Ω—ã—Ö –¥–æ–º–µ–Ω–æ–≤

---

1. Open any webpage in Safari
2. Click the Domain Tracker extension icon in the Safari toolbar (globe icon)
3. In the popup, you'll see a list of all domains the page sent requests to
4. Use the "Clear" button to clear the list for the current tab
5. The counter at the bottom shows the total number of tracked domains

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ / Project Structure

```
safari-domain-extention/
‚îú‚îÄ‚îÄ Domain Tracker/
‚îÇ   ‚îú‚îÄ‚îÄ Domain Tracker.xcodeproj/    # Xcode project file
‚îÇ   ‚îú‚îÄ‚îÄ Shared (App)/                # macOS app files
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AppDelegate.swift        # App delegate
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ViewController.swift     # Main window controller
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Main.storyboard          # UI layout
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Assets.xcassets/         # App icons
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Domain_Tracker.entitlements
‚îÇ   ‚îî‚îÄ‚îÄ Domain Tracker Extension/    # Safari extension files
‚îÇ       ‚îú‚îÄ‚îÄ manifest.json            # Extension manifest
‚îÇ       ‚îú‚îÄ‚îÄ background.js            # Background script (domain tracking)
‚îÇ       ‚îú‚îÄ‚îÄ popup.html               # Popup UI
‚îÇ       ‚îú‚îÄ‚îÄ popup.js                 # Popup logic
‚îÇ       ‚îú‚îÄ‚îÄ popup.css                # Popup styles
‚îÇ       ‚îú‚îÄ‚îÄ images/                  # Extension icons
‚îÇ       ‚îú‚îÄ‚îÄ SafariWebExtensionHandler.swift
‚îÇ       ‚îú‚îÄ‚îÄ Info.plist
‚îÇ       ‚îî‚îÄ‚îÄ Domain_Tracker_Extension.entitlements
‚îú‚îÄ‚îÄ README.md
‚îî‚îÄ‚îÄ LICENSE
```

## –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ / Development

### –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç / How it works

1. **background.js** - –§–æ–Ω–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç, –∫–æ—Ç–æ—Ä—ã–π —Å–ª—É—à–∞–µ—Ç –≤—Å–µ –≤–µ–±-–∑–∞–ø—Ä–æ—Å—ã —á–µ—Ä–µ–∑ API `browser.webRequest.onBeforeRequest`. –û–Ω –∏–∑–≤–ª–µ–∫–∞–µ—Ç –¥–æ–º–µ–Ω—ã –∏–∑ URL –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∏—Ö –≤ Map, –≥–¥–µ –∫–ª—é—á–æ–º —è–≤–ª—è–µ—Ç—Å—è ID –≤–∫–ª–∞–¥–∫–∏.

2. **popup.html/js/css** - –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –≤—Å–ø–ª—ã–≤–∞—é—â–µ–≥–æ –æ–∫–Ω–∞, –∫–æ—Ç–æ—Ä–æ–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ –∏–∫–æ–Ω–∫—É —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è. –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ —Ñ–æ–Ω–æ–≤–æ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞ –∏ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –¥–æ–º–µ–Ω–æ–≤.

3. **SafariWebExtensionHandler.swift** - Swift-–æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏ –º–µ–∂–¥—É —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ–º –∏ –Ω–∞—Ç–∏–≤–Ω—ã–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º (–≤ –¥–∞–Ω–Ω–æ–π –≤–µ—Ä—Å–∏–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –º–∏–Ω–∏–º–∞–ª—å–Ω–æ).

---

1. **background.js** - Background script that listens to all web requests via the `browser.webRequest.onBeforeRequest` API. It extracts domains from URLs and stores them in a Map where the key is the tab ID.

2. **popup.html/js/css** - Popup interface shown when clicking the extension icon. Requests data from the background script and displays the domain list.

3. **SafariWebExtensionHandler.swift** - Swift handler for communication between the extension and native app (minimally used in this version).

### Debugging

–î–ª—è –æ—Ç–ª–∞–¥–∫–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è:

1. –û—Ç–∫—Ä–æ–π—Ç–µ Safari ‚Üí Develop ‚Üí Web Extension Background Pages ‚Üí Domain Tracker
2. –ò–ª–∏ –∫–ª–∏–∫–Ω–∏—Ç–µ –ø—Ä–∞–≤–æ–π –∫–Ω–æ–ø–∫–æ–π –Ω–∞ popup –∏ –≤—ã–±–µ—Ä–∏—Ç–µ "Inspect Element"

---

To debug the extension:

1. Open Safari ‚Üí Develop ‚Üí Web Extension Background Pages ‚Üí Domain Tracker
2. Or right-click on the popup and select "Inspect Element"

## –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º / Troubleshooting

### –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ Safari

1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ Domain Tracker –∑–∞–ø—É—â–µ–Ω–æ —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω —Ä–∞–∑
2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ Safari
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Safari ‚Üí Settings ‚Üí Extensions

### –î–æ–º–µ–Ω—ã –Ω–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—é—Ç—Å—è

1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ –≤–∫–ª—é—á–µ–Ω–æ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö Safari
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —É —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –µ—Å—Ç—å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ —Å–∞–π—Ç–∞
3. –û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É, —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ

### –û—à–∏–±–∫–∏ —Å–±–æ—Ä–∫–∏ –≤ Xcode

1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã–±—Ä–∞–Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è Team –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –ø–æ–¥–ø–∏—Å–∏ –∫–æ–¥–∞
2. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ—á–∏—Å—Ç–∏—Ç—å –ø—Ä–æ–µ–∫—Ç (Product ‚Üí Clean Build Folder)
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Xcode 14.0 –∏–ª–∏ –Ω–æ–≤–µ–µ

---

### Extension doesn't show in Safari

1. Make sure the Domain Tracker app has been launched at least once
2. Restart Safari
3. Check Safari ‚Üí Settings ‚Üí Extensions

### Domains are not being tracked

1. Make sure the extension is enabled in Safari settings
2. Check that the extension has permissions for the current site
3. Refresh the page to start tracking

### Xcode build errors

1. Make sure the correct Team is selected in code signing settings
2. Try cleaning the project (Product ‚Üí Clean Build Folder)
3. Verify you're using Xcode 14.0 or newer

## –õ–∏—Ü–µ–Ω–∑–∏—è / License

MIT License - see LICENSE file for details
